# V8.12 新聞系統戰略升級 - 設計摘要與實施計畫

**討論日期**：2026-01-19  
**狀態**：⏳ **待討論定案**（尚未開始實現）  
**版本**：V8.12（從 V8.9/V8.10 升級）

---

## 📋 一、核心問題與修正方向

### 問題 1：新聞收集方式不當
**現狀問題**：
- ❌ 使用關鍵字搜尋（"financial news today"）會遺漏
- ❌ 例如："黃金怎樣怎樣"不會包含"金融"關鍵字
- ❌ 政策面新聞更容易被遺漏

**修正方向**：
- ✅ **既然CSE已經白名單限制，應該抓白名單網站每天最新的所有新聞**
- ✅ **程式責任**：判斷日期是當日最新
- ✅ **Flash清洗責任**：洗掉雜訊 + 篩選出"當日"的"新聞"（不能是好幾天前的，不能是廣告或論壇）

---

### 問題 2：新聞分類系統過於簡單
**現狀問題**：
- ❌ 目前只有「十大類」平面分類
- ❌ 無法精準判斷風向

**修正方向**：
- ✅ **從平面分類 → 多維度標籤系統 (Multi-Dimensional Tagging System)**

---

### 問題 3：個股新聞索引缺失
**現狀問題**：
- ❌ Weekly 要從幾千條新聞裡自己撈「哪條跟 NVDA 有關」，效率太低且容易遺漏

**修正方向**：
- ✅ **建立「個股-新聞索引 (Ticker-News Index)」**
- ✅ **反向索引 (Inverted Index)**：讓 Weekly 可以用「股票代碼」反查所有相關新聞

---

### 問題 4：新聞驗證機制缺失
**現狀問題**：
- ❌ 市場充滿「出貨文」、「騙線新聞」、「投行看多做空」
- ❌ 無法分辨新聞的正確與否，可能造成反效果

**修正方向**：
- ✅ **Daily 負責「可機械驗證、且系統本來就掌握的硬數據」**
- ✅ **其他軟性、難驗證、敘事型資料，全部只做標記，不做裁決**

---

## 🎯 二、核心設計概念（待定案）

### 2.1 新聞收集方式修正

#### 原設計（錯誤）
```
使用關鍵字搜尋：
- "financial news today"
- "stock market news today"
- "財經新聞 今日"
```

#### 新設計（正確）
```
既然CSE已經白名單限制：
1. 抓白名單網站每天最新的所有新聞（不使用關鍵字限制）
2. 程式判斷：日期是當日最新（±6小時）
3. Flash清洗：
   - 洗掉雜訊（廣告、論壇、非正式新聞）
   - 篩選出"當日"的"新聞"（不能是好幾天前發布的）
```

**⭐ 重要決策（2026-01-19）**：
- **白名單CSE**：後臺設定，程式碼不加任何限制語句
- **CSE搜尋**：直接搜尋（不使用關鍵字），由CSE後臺白名單限制網站範圍

**實施要點**：
- 修改 `collectRawNews()` 函數
- 移除關鍵字搜尋，改為直接CSE搜尋（由後臺白名單限制）
- 增加日期判斷邏輯（當日最新）

---

### 2.2 多維度標籤系統（取代平面分類）

#### 維度一：事件屬性 (Event Type)
決定「發生了什麼事」

**A. 宏觀與政策 (Macro & Policy)** —— P1 總經模組專用
- 央行政策 (Central Bank)：利率決策、FOMC 會議紀要、官員談話 (Hawk/Dove)
- 經濟數據 (Econ Data)：CPI/PPI (通膨)、NFP (就業)、GDP、PMI
- 地緣政治 (Geopolitics)：戰爭、貿易戰、制裁、供應鏈斷鏈
- 財政與監管 (Fiscal & Reg)：反壟斷調查、稅收政策、政府支出

**B. 企業基本面 (Corporate Fundamentals)** —— P0/P2 產業模組專用
- 財報結果 (Earnings Result)：EPS/營收擊敗或未達預期
- 前瞻指引 (Guidance)：⭐ 最重要。公司對未來的預測（上調/下修）
- 併購與重組 (M&A/Spin-off)：收購、拆分、私有化
- 產品與技術 (Product/Tech)：新產品發表、技術突破
- 管理層變動 (Management)：CEO 離職、會計醜聞、內部鬥爭

**C. 資金與籌碼 (Flow & Sentiment)** —— P2.5 籌碼模組專用
- 機構評級 (Analyst Ratings)：⭐ P5.1 核心。升降評、目標價調整
- 內部人交易 (Insider Activity)：CEO/大股東申報賣股或買股
- 機構流向 (Institutional Flow)：13F 報告、避險基金持倉揭露
- 股票回購/增資 (Buyback/Offering)：公司庫藏股或發行新股吸血

**D. 市場結構 (Market Structure)** —— P3 技術模組專用
- 板塊輪動 (Sector Rotation)：資金從科技流向傳產等現象
- 衍生品異動 (Derivatives)：Gamma Squeeze、大量期權到期 (OpEx)、未平倉量異常
- 技術訊號 (Technical Signal)：突破新高、跌破均線、黃金交叉（僅限新聞報導的技術面分析）

**E. 專項追蹤 (Specific Themes)** —— V8.12 特化
- AI 與半導體 (AI/Semi)：專門追蹤 GPU、HBM、CoWoS 相關新聞
- 加密貨幣 (Crypto)：比特幣、區塊鏈相關（因與科技股連動高）

**F. 原物料與匯率 (Commodities & FX)** —— P1/P4 避險模組專用
- 能源 (Energy)：原油 (WTI/Brent)、天然氣、燃油庫存 (EIA 數據)、OPEC+ 會議
- 貴金屬 (Precious Metals)：黃金 (避險訊號)、白銀、央行購金新聞
- 工業金屬 (Industrial Metals)：銅 (經濟晴雨表)、鋁、鋰/鈷 (電動車原料)
- 農產品 (Agriculture)：黃豆、玉米、小麥 (影響食品通膨)、氣候異常 (聖嬰現象)
- 匯率變動 (Forex)：美元指數 (DXY)、日圓 (Carry Trade 拆倉風險)、新興市場貨幣危機

#### 維度二：影響層級 (Impact Scope)
決定 AI 該如何調整 P4 的資金權重 (U)

- **全球性 (Global)**：影響全市場 (如：聯準會升息) → 調整總倉位
- **板塊性 (Sector)**：影響單一產業 (如：美國限制 AI 晶片出口) → 調整板塊權重
- **個股性 (Stock)**：僅影響單一公司 (如：財報) → 調整個股操作

#### 維度三：情緒極性 (Sentiment Polarity)
決定 P3/P6 是要「進攻」還是「防守」

- **極度利多 (Very Bullish)**：結構性改變的利好（如 AI 工業革命）
- **短多 (Slightly Bullish)**：暫時性利好
- **中性 (Neutral)**：事實陳述，無明顯方向
- **短空 (Slightly Bearish)**：暫時性利空（如庫存調整）
- **極度利空 (Very Bearish)**：毀滅性打擊（如造假、戰爭）

**⭐ 重要決策（2026-01-19）**：
- **設計方向**：以weekly決策時如何好讀取已經夠精確為方向設計
- **輸出格式**：必須方便Weekly AI讀取和使用

**實施要點**：
- 修改 `deduplicateAndCategorizeWithGeminiPro()` 函數
- 輸出格式改為多維度標籤（而非單一分類），格式需方便Weekly讀取
- 更新 `NEWS_ATOMS_DAILY` Schema，增加多維度標籤欄位

---

### 2.3 個股新聞索引系統

#### 設計概念
**不是只分一個專區，而是建立「反向索引 (Inverted Index)」**

#### 實施流程
1. **Flash 標記**：每則新聞除了分類，還要提取 `Related_Tickers: ["NVDA", "AMD"]`
2. **Daily 聚合**：Daily 結算時，不只存新聞，還要產出一張「當日熱點表」：
   ```
   NVDA: 關聯新聞 12 則 (8 則利多 / 4 則中性) → 連結到具體新聞 ID
   TSM: 關聯新聞 5 則
   ```
3. **Weekly 讀取**：Weekly AI 不需要讀完全部新聞。它先讀「當日熱點表」，發現「本週 NVDA 討論度暴增 300%？」→ AI 主動調閱 NVDA 相關的那 12 則新聞進行深度分析

#### 新聞三大類別
1. **整體宏觀世界財經與金融市場背景建構**
2. **個股一週相關新聞索引**
3. **個股最新機構評級索引**

**⭐ 重要決策（2026-01-19）**：
- **主要功能**：上標籤，讓weekly做"個股當周策略"時，能夠快速引入做為決策因子之一
- **設計重點**：快速讀取、精確標記、方便Weekly使用

**實施要點**：
- 修改 `atomizeNewsWithGeminiFlash()` 函數，增加 `Related_Tickers` 提取
- 新增 `buildTickerNewsIndex()` 函數，聚合當日熱點表
- 新增 `STOCK_NEWS_INDEX_DAILY` 表格（或整合到現有表格）
- 修改 Weekly 策略制定流程，引入個股新聞索引作為決策因子（在"個股當周策略"時快速引入）

---

### 2.4 新聞驗證機制（三層結構）

#### Layer 1：Daily（Gemini Pro）- 資料可信度檢查員

**Daily 可以、而且「必須」做的事情**：

**1️⃣ 多語去重**（已有）
- 同事件多來源合併
- 降低情緒性放大

**2️⃣ 新聞時效性檢驗**（新增）
- Daily AI 應檢查：新聞所引用的數據是否明顯不是「最近可得數據」
- 檢查項目：
  - 是否使用模糊時間詞（recent / lately / over the past years）
  - 是否把舊高點 / 舊均值當成現在
- 輸出：`DATA_RECENCY = OK | STALE | UNCLEAR`

**3️⃣ 數據語意健檢**（新增）
- 本質是 QA，不是分析
- Daily Pro 可以、而且應該做：
  - 判斷新聞是否存在明顯錯誤引用（數字級錯）
  - 比例失真（例如只講 YoY 不講 QoQ）
  - 絕對值 vs 相對值誤導
  - 分母未說清楚（% of what?）
- 輸出：`DATA_COHERENCE = CONSISTENT | QUESTIONABLE | INCONSISTENT`
- ⚠️ **禁止輸出任何市場結論**

**4️⃣ 數據驗證（Cross-check）**（新增）
- **觸發條件**：
  - 若 `DATA_COHERENCE != CONSISTENT`
  - 或該新聞屬於高權重宏觀 / 利率 / 就業 / 通膨
- **驗證方式**：
  - **由Gemini Pro執行驗證邏輯**
  - **數據來源**：系統自有 Daily DB（硬數據），直接提供給Gemini Pro
  - **禁止事項**：❌ 禁止讓AI去網路搜尋，避免AI幻覺
  - 使用 Proxy 驗證「方向與敘事是否被市場行為支持」（Proxy數據來自Daily DB）
- ⚠️ **Daily AI 僅能對「數據正確性、時效性、語意一致性」做標記，嚴禁對市場方向、影響程度、投資意義下結論**

#### 數據分級：Hard Data vs Soft Data

**🟦 A 類：硬數據（Daily 必須驗證）**
- **定義特徵**：
  - 有明確數值
  - 有高頻、權威、可交叉來源
  - 系統本來就在蒐集
- **典型例子**：
  - 股價 / 成交量 / 波動
  - 商品期貨價格（用 ETF proxy）
  - 匯率
  - 利率（國債、政策利率）
  - 指數數值
- **驗證方式**：
  - 時效性檢查
  - 與 Daily DB 一致性檢查
  - 使用 Proxy 驗證「方向與敘事是否被市場行為支持」

**🟧 B 類：半硬數據（只標記，不驗證）**
- **特徵**：
  - 看起來像數字
  - 但來源分散、不即時、不一致
- **例子**：
  - 營收預估
  - 分析師共識
  - 公司內部指引（未正式文件）
  - 產業出貨量推估
- **標記**：
  ```
  DATA_TYPE = SEMI_STRUCTURED
  DATA_VERIFICATION = NOT_PERFORMED
  ```
- **Weekly 處理**：可以用，但必須降權、搭配價格反應一起看

**🟥 C 類：軟數據（明文不可驗證）**
- **特徵**：
  - 本質是敘事、立場、風向
  - 沒有單一「正確數字」
- **例子**：
  - 消息人士說法
  - 政策傳聞
  - 管理層態度
  - 地緣政治風聲
- **標記**：
  ```
  DATA_TYPE = NARRATIVE
  DATA_VERIFICATION = NOT_APPLICABLE
  ```
- **Daily 處理**：僅做多語去重、類型分類、快照保存

#### Proxy 驗證方法論（關鍵轉念）

**❌ 錯誤期待**：
- 用 ETF / proxy 去驗證新聞裡寫的「油價上漲 4.2%」、「銅價跌到 3.95 美元」
- **這件事本質上就是錯的**

**✅ 正確用途**：
- **驗證「方向與敘事是否被市場行為支持」**

**三種合法檢驗**：

**① 敘事方向檢驗 (Direction Check)**
- 檢查對應 proxy 是否「明顯朝同一方向移動」？
- 例如：新聞說「油價大漲」→ 檢查 USO / XLE 是否上漲
- 輸出：`NARRATIVE_DIRECTION = CONSISTENT | UNCONFIRMED | CONFLICTING`

**② 市場重要性檢驗 (Significance Check)**
- 市場有沒有把這件事當一回事？
- 檢查 proxy 的幅度 / 成交量 / 是否突破
- 例如：新聞說「AI 泡沫破裂」→ SOXX 只是 -0.4%、量縮 → 市場不買單
- 輸出：`MARKET_CONFIRMATION = STRONG | MODERATE | WEAK`

**③ 共振檢驗 (Cross-Asset Resonance)**
- 真正重要的新聞，通常會產生「共振」
- 例如：原油新聞 → USO + XLE + CAD/NOK 都反應
- 如果新聞很大，但 proxy 沒有「多點共振」→ 不能給高權重
- 輸出：`CROSS_ASSET_RESONANCE = STRONG | MODERATE | WEAK`

**新聞中的數字處理**：
- 數字存在，但標記為「未驗證、僅敘事引用」
- 標記：`NUMERIC_CLAIMS = PRESENT`, `DATA_VERIFICATION = NOT_VERIFIED (PROXY_ONLY)`
- Weekly 看到就知道：不要把「4.2%」當事實，只把它當「市場敘事的一部分」

**⭐ 重要決策（2026-01-19）**：
- **驗證方式**：撰寫非常精準但又不能太過嚴格的prompt，由gemini pro智慧模型去做驗證
- **禁止事項**：
  - ❌ 不可以用程式邏輯驗證，必須由AI模型智慧判斷
  - ❌ **禁止讓AI去網路搜尋**，避免AI幻覺
- **數據來源**：
  - ✅ **時效性檢驗**：由Gemini Pro執行（判斷新聞中的時間詞彙是否過時）
  - ✅ **語意健檢**：由Gemini Pro執行（判斷新聞內部邏輯是否一致）
  - ✅ **數據驗證**：由Gemini Pro執行，**但使用我們提供的Daily DB數據**，不要讓AI去網路搜尋
  - ✅ **Proxy驗證**：由Gemini Pro執行，**但使用我們提供的Daily DB中的Proxy數據**，不要讓AI去網路搜尋
- **Prompt設計**：需要非常精準，但不過於嚴格（避免誤判）

**實施要點**：
- 修改 `deduplicateAndCategorizeWithGeminiPro()` 函數，增加驗證邏輯（由AI模型執行）
- 撰寫精準的驗證Prompt（時效性、語意健檢、數據驗證、Proxy驗證）
- **關鍵**：在Prompt中明確提供Daily DB數據給Gemini Pro，禁止AI自行網路搜尋
- 新增 `verifyNewsDataWithDailyDB()` 函數：
  - 讀取Daily DB硬數據
  - 將Daily DB數據連同新聞內容一起提供給Gemini Pro
  - 驗證邏輯由Gemini Pro執行（不寫死程式邏輯）
  - **禁止讓AI去網路搜尋**
- 新增 `checkNarrativeDirection()` 函數：
  - 讀取Daily DB中的Proxy數據
  - 將Proxy數據連同新聞內容一起提供給Gemini Pro
  - 驗證邏輯由Gemini Pro執行（不寫死程式邏輯）
  - **禁止讓AI去網路搜尋**
- 更新 `NEWS_ATOMS_DAILY` Schema，增加驗證標記欄位

---

### 2.5 Daily DB 擴充（硬數據錨點）

#### 分級原則

**🟩 Tier 1：一級硬錨點（Primary Truth Anchors）**
- **特徵**：
  - Google Finance 穩定抓得到
  - 高頻、權威
  - 可直接用來「質疑新聞敘事」
- **Daily 必須抓，不能缺**

**🟨 Tier 2：二級代理錨點（Proxy Anchors）**
- **特徵**：
  - 本質是 ETF / Proxy
  - 有市場情緒與股市因素
  - 用來「輔助驗證，不作為否決」
- **Daily 抓，但 Weekly 解讀時自動降權**

#### 建議的 Daily DB 擴充清單

**A. 宏觀與政策（Macro）**
- ✅ US10Y（Tier 1）
- ✅ US02Y（Tier 1）
- ✅ VIX（Tier 1）
- ✅ DXY（Tier 1）
- ➕ **MOVE Index（債券波動）或 Proxy**（Tier 2，用 TLT 的 intraday volatility 當 proxy）
  - 原因：很多新聞是「債市出事了 / 流動性緊張」，但股市與 VIX 尚未反應
  - 這是「比 VIX 更早」的警報器

**B. 企業基本面（板塊 ETF）**
- ✅ XLK / XLF / XLE / XLV / XLY / XLP / XLI / XLB / XLC / XLRE / XLU（Tier 2）
- 用途：只驗證「產業方向」，不用來否定單一公司新聞
- 若新聞說「科技全面崩」，但 XLK 無反應 → 標記敘事誇大

**C. 資金與籌碼（Flows）**
- ✅ HYG（Tier 1 Risk-on/off）
- ✅ TLT（Tier 1）
- ➕ **LQD（投資級公司債 ETF）**（Tier 2）
  - 原因：HYG 跌 → 可能只是高風險資產被賣；LQD 跌 → 才是真正的信用風險
  - 新聞說「金融系統緊張」→ HYG + LQD 一起看，才能判斷真假

**D. 市場結構（Structure）**
- ✅ RUT（Tier 1）
- ✅ DJI / SPX / NDX（Tier 1）
- ➕ **SPX equal-weight (RSP)**（Tier 2，可選但非常有價值）
  - 用途：驗證「權值股吸血」敘事
  - 新聞說「市場很強」，但 SPX 漲、RSP 跌 → 標記為「集中型上漲」

**E. 專項主題（Themes）**
- ✅ SOXX / SMH（Tier 2，必須）
- ⚠️ BTCUSD（Tier 2，有風險）
  - Primary：BTCUSD（若可得）
  - Fallback：BITO / IBIT（ETF proxy）
  - 避免 Daily 因加密源不穩而產生誤報
- ✅ IGV（Tier 2）

**F. 原物料（Commodities）**
- ⚠️ **重要提醒**：Yahoo 期貨代碼（=F）不是 Google Finance 的穩定公民
- ✅ **建議做法**：
  - Primary：商品 ETF proxy
    - 原油 → USO / XLE（Tier 2）
    - 黃金 → GLD（Tier 2）
    - 銅 → COPX（Tier 2）
  - Secondary（若可得）：期貨價格（僅做參考）
  - Daily 以 ETF 為準，期貨僅補充，不當真值

**G. 戰略物資（Strategic Materials）**
- ✅ LIT（鋰）（Tier 2）
- ✅ REMX（稀土）（Tier 2）
- ✅ URA（鈾）（Tier 2）
- ✅ COPX（銅礦）（Tier 2）
- ✅ TAN（太陽能）（Tier 2）
- ➕ **XME（Metal & Mining ETF）**（Tier 2）
  - 用途：大宗金屬總體 proxy，補足 REMX / COPX 的盲區

**⭐ 重要決策（2026-01-19）**：
- **擴充策略**：全部擴充好，這個很簡單
- **未來擴充**：如果發現新聞多次出現DB沒有的數據，就一樣擴充上去
- **維護原則**：保持靈活，根據實際新聞內容動態擴充

**實施要點**：
- 擴充 `24_P5_DAILY_MACRO.js`，增加上述所有數據收集（Tier 1 + Tier 2）
- 新增 `MACRO_DATA_DAILY` 表格欄位（或擴充現有表格）
- 建立 Tier 1 / Tier 2 標記機制
- 建立 Proxy 驗證邏輯（由Gemini Pro執行，不寫死程式邏輯）

---

## 📊 三、實施計畫（待定案後執行）

### Phase 1：新聞收集方式修正
**優先級**：🔴 最高

1. **修改 `collectRawNews()` 函數**
   - 移除關鍵字搜尋
   - 改為直接CSE搜尋（由CSE後臺白名單限制，程式碼不加任何限制語句）
   - 增加日期判斷邏輯（當日最新，±6小時）

2. **修改 `atomizeNewsWithGeminiFlash()` 函數**
   - 增加時效性檢查（不能是好幾天前發布的）
   - 加強雜訊過濾（廣告、論壇、非正式新聞）

3. **測試驗證**
   - 確認能抓取到足夠的新聞（不限於關鍵字）
   - 確認時效性檢查有效

---

### Phase 2：多維度標籤系統
**優先級**：🟡 高

1. **更新 `NEWS_ATOMS_DAILY` Schema**
   - 增加多維度標籤欄位：
     - `event_type`（事件屬性）
     - `impact_scope`（影響層級）
     - `sentiment_polarity`（情緒極性）
     - `related_tickers`（關聯股票代碼列表）

2. **修改 `deduplicateAndCategorizeWithGeminiPro()` 函數**
   - 輸出格式改為多維度標籤（而非單一分類）
   - **格式設計**：以weekly決策時如何好讀取已經夠精確為方向設計
   - 增加 `Related_Tickers` 提取邏輯

3. **測試驗證**
   - 確認多維度標籤正確輸出
   - 確認 `Related_Tickers` 提取準確

---

### Phase 3：個股新聞索引系統
**優先級**：🟡 高

1. **新增 `buildTickerNewsIndex()` 函數**
   - 聚合當日熱點表
   - 統計每個 ticker 的關聯新聞數量、情緒分布
   - **設計重點**：上標籤，讓weekly做"個股當周策略"時，能夠快速引入做為決策因子之一

2. **新增或擴充表格**
   - `STOCK_NEWS_INDEX_DAILY` 表格（或整合到現有表格）
   - 欄位：`ticker`, `date`, `news_count`, `bullish_count`, `bearish_count`, `neutral_count`, `news_ids`

3. **修改 Weekly 策略制定流程**
   - 引入個股新聞索引作為決策因子
   - 在決定每個個股的本週策略時，調閱該股本週的新聞索引

4. **測試驗證**
   - 確認索引正確建立
   - 確認 Weekly 能正確讀取和使用索引

---

### Phase 4：新聞驗證機制
**優先級**：🟡 高

1. **修改 `deduplicateAndCategorizeWithGeminiPro()` 函數**
   - 增加時效性檢驗邏輯（`DATA_RECENCY`）- **由Gemini Pro執行，不寫死程式邏輯**
   - 增加數據語意健檢邏輯（`DATA_COHERENCE`）- **由Gemini Pro執行，不寫死程式邏輯**
   - 增加數據驗證邏輯（`DATA_VERIFICATION`）- **由Gemini Pro執行，不寫死程式邏輯**
   - **Prompt設計**：撰寫非常精準但又不能太過嚴格的prompt

2. **新增 `verifyNewsDataWithDailyDB()` 函數**
   - **讀取Daily DB硬數據**（不讓AI去網路搜尋）
   - **提供 Daily DB 硬數據給 Gemini Pro**（包含股價、匯率、利率、ETF等所有硬數據）
   - 使用 Proxy 驗證「方向與敘事是否被市場行為支持」- **由Gemini Pro執行，不寫死程式邏輯**
   - **數據來源**：所有Proxy數據來自Daily DB，禁止讓AI去網路搜尋
   - 輸出：`NARRATIVE_DIRECTION`, `MARKET_CONFIRMATION`, `CROSS_ASSET_RESONANCE`
   - **關鍵**：
     - ✅ 所有驗證邏輯都由Gemini Pro智慧模型執行，不可以用程式邏輯
     - ❌ **禁止讓AI去網路搜尋，避免AI幻覺**
     - ✅ 所有驗證數據都從Daily DB讀取後提供給AI

3. **更新 `NEWS_ATOMS_DAILY` Schema**
   - 增加驗證標記欄位：
     - `data_type`（HARD / SEMI_STRUCTURED / NARRATIVE）
     - `data_recency`（OK / STALE / UNCLEAR）
     - `data_coherence`（CONSISTENT / QUESTIONABLE / INCONSISTENT）
     - `data_verification`（VERIFIED / NOT_VERIFIED / NOT_APPLICABLE）
     - `narrative_direction`（CONSISTENT / UNCONFIRMED / CONFLICTING）
     - `market_confirmation`（STRONG / MODERATE / WEAK）
     - `cross_asset_resonance`（STRONG / MODERATE / WEAK）

4. **測試驗證**
   - 確認驗證邏輯正確運作
   - 確認標記準確

---

### Phase 5：Daily DB 擴充
**優先級**：🟢 中

1. **擴充 `24_P5_DAILY_MACRO.js`**
   - **一次性擴充所有數據**（全部擴充好，這個很簡單）
   - 增加 Tier 1 硬數據收集：
     - MOVE Index（或 TLT volatility proxy）
     - LQD（投資級公司債 ETF）
     - RSP（SPX equal-weight，可選）
   - 增加 Tier 2 代理錨點收集：
     - BITO / IBIT（BTC proxy）
     - XME（Metal & Mining ETF）
     - 以及其他所有建議的數據
   - **未來擴充機制**：如果發現新聞多次出現DB沒有的數據，就一樣擴充上去

2. **建立 Tier 分級標記機制**
   - 在數據收集時標記 Tier 1 / Tier 2
   - 在驗證時根據 Tier 分級決定驗證方式

3. **更新 `MACRO_DATA_DAILY` Schema**
   - 增加 Tier 標記欄位
   - 增加新數據欄位

4. **測試驗證**
   - 確認新數據能正確收集
   - 確認 Tier 分級正確

---

## ⚠️ 四、重要設計原則（必須遵守）

### 1. Daily 的職權邊界
- ✅ **Daily 可以做的**：
  - 數據正確性、時效性、語意一致性檢查
  - 使用 Proxy 驗證「方向與敘事是否被市場行為支持」
- ❌ **Daily 禁止做的**：
  - 對市場方向、影響程度、投資意義下結論
  - 判斷新聞的「真假」（只能標記「支持/未支持」）

### 2. Proxy 驗證方法論
- ❌ **禁止**：用 ETF / proxy 去驗證新聞中的精確數字
- ✅ **允許**：用 Proxy 驗證「方向與敘事是否被市場行為支持」
- ✅ **三種合法檢驗**：
  1. 敘事方向檢驗（Direction Check）
  2. 市場重要性檢驗（Significance Check）
  3. 共振檢驗（Cross-Asset Resonance）

### 3. 數據分級原則
- **Tier 1（一級硬錨點）**：Daily 必須抓，不能缺
- **Tier 2（二級代理錨點）**：Daily 抓，但 Weekly 解讀時自動降權
- **新增 Daily 硬數據**：需符合「新聞證偽價值 > 維護成本」

### 4. 新聞三大類別
1. **整體宏觀世界財經與金融市場背景建構**
2. **個股一週相關新聞索引**
3. **個股最新機構評級索引**

---

## 📝 五、待討論問題

### 問題 1：CSE 白名單網站列表 ✅ **已決策**
- ✅ **決策**：白名單CSE是後臺設定，程式碼不加任何限制語句
- ✅ **實施**：直接CSE搜尋（不使用關鍵字），由CSE後臺白名單限制網站範圍

### 問題 2：多維度標籤的具體實現 ✅ **已決策**
- ✅ **決策**：以weekly決策時如何好讀取已經夠精確為方向設計
- ⚠️ **待確認**：
  - Gemini Pro 如何輸出多維度標籤？（需要設計方便Weekly讀取的格式）
  - 是否需要調整 Prompt 格式？
  - 如何處理標籤衝突或不完整的情況？

### 問題 3：個股新聞索引的聚合頻率 ✅ **已決策**
- ✅ **決策**：主要是上標籤，讓weekly做"個股當周策略"時，能夠快速引入做為決策因子之一
- ⚠️ **待確認**：
  - 是每日聚合一次，還是即時更新？
  - 如何處理跨日的新聞索引（Weekly 需要一週的索引）？

### 問題 4：驗證邏輯的具體實現 ✅ **已決策**
- ✅ **決策**：撰寫非常精準但又不能太過嚴格的prompt，由gemini pro智慧模型去做驗證，不可以用程式
- ✅ **數據來源**：數據驗證、Proxy驗證都由我們自己Daily DB去驗證就好，不用再網路搜尋，避免AI幻覺
- ⚠️ **待確認**：
  - Prompt 的具體設計（如何精準但不過於嚴格）
  - 如何在Prompt中明確提供Daily DB數據給AI（避免AI自行網路搜尋）
  - 如何讓AI模型理解「明顯朝同一方向移動」、「市場有沒有把這件事當一回事」、「多點共振」等概念？
  - 需要定義哪些資產需要共振（用於Prompt中，但數據來源是Daily DB）

### 問題 5：Daily DB 擴充的優先順序 ✅ **已決策**
- ✅ **決策**：全部擴充好，這個很簡單。未來如果有發現新聞多次出現DB沒有的數據，就一樣擴充上去
- ✅ **實施**：一次性擴充所有 Tier 1 + Tier 2 數據
- ✅ **維護原則**：保持靈活，根據實際新聞內容動態擴充

---

## 🎯 六、總結

### 核心變更
1. **新聞收集**：從關鍵字搜尋 → 抓取白名單網站最新新聞
2. **新聞分類**：從平面分類 → 多維度標籤系統
3. **個股索引**：新增個股-新聞反向索引
4. **新聞驗證**：新增三層驗證機制（時效性、語意健檢、數據驗證）
5. **Daily DB**：擴充硬數據錨點（Tier 1 / Tier 2 分級）

### 設計哲學
- **Daily 是資料鑑識科（Forensics）**：只負責數據正確性、時效性、語意一致性檢查
- **Weekly 是情報分析處（Intelligence）**：負責市場方向、影響程度、投資意義分析
- **Proxy 驗證**：不是驗證數字，而是驗證「方向與敘事是否被市場行為支持」

---

**狀態**：⏳ **待討論定案**  
**下一步**：等待用戶確認設計後，開始實現
