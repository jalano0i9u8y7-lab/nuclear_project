# P0-P5 AI 模型使用完整清單 V8.14

**日期**：2026-01-19  
**版本**：V8.14  
**對齊**：V8.0 SSOT + V8.14 變更

---

## 📋 清單說明

此清單列出所有 P0-P5 階段使用的 AI 模型，包括：
- **執行者（Executor）**：主要執行分析任務的模型
- **審查者（Auditor）**：審查執行者輸出的模型
- **特殊用途**：特定任務使用的模型（如新聞處理、數據驗證等）

**模型配置位置**：`src/02_M0_CONFIG.js`

---

## 🔧 可用模型清單

### 強推理模型（深度分析）
- **OPUS**：`claude-opus-4-5-20251101` (200K context, Input $5.0/1K, Output $25.0/1K)
- **O3**：`o3` (200K context, Input $2.0/1K, Output $8.0/1K)
- **SONNET**：`claude-sonnet-4-5-20250929` (200K context, Input $3.0/1K, Output $15.0/1K)
- **GPT**：`gpt-5.2` (400K context, Input $1.75/1K, Output $14.0/1K)

### 長窗口模型（批量處理）
- **GEMINI_PRO**：`gemini-3-pro-preview` (1M context, Input $2.0/1K, Output $12.0/1K)
- **GEMINI_FLASH**：`gemini-3.0-flash` (2M context, Input $0.1/1K, Output $0.4/1K) ⭐ V8.14 升級

### 特殊用途
- **GEMINI_SEARCH**：`gemini-3-pro-preview` (200K context, 條件觸發的事實查證)

---

## 📊 P0-P5 模型使用清單

### **P0 系列：產業工程學分析（季度執行）**

#### **P0: 產業面分析找出潛力產業**
- **執行頻率**：季度
- **執行者**：OPUS (`claude-opus-4-5-20251101`)
- **審查者**：GPT (`gpt-5.2`)
- **功能**：工程必然分析、結構性定價權分析、輸出「必然位置表」
- **批次大小**：N/A（單次執行）
- **備註**：純學術硬底子分析，不包含任何籌碼面分析

#### **P0.5: 產業鏈地圖與供應鏈情報網**
- **執行頻率**：季度（與 P0 同步）
- **執行者**：❓ **未明確指定**（可能是純數據處理，無 AI）
- **審查者**：❓ **未明確指定**
- **功能**：視覺化產業關係、產業資金流追蹤、供應鏈風險監控、產業鏈節點識別
- **備註**：需要確認是否有 AI 分析任務

#### **P0.7: 系統動力學驗證**
- **執行頻率**：季度（與 P0 同步）
- **執行者**：O3 (`o3`)
- **審查者**：OPUS (`claude-opus-4-5-20251101`)
- **功能**：敘事狀態分析、循環主導分析、時間定位分析、槓桿角色類型分析
- **批次大小**：N/A（單次執行）
- **備註**：
  - ⭐ 避免同家盲點：o3（OpenAI）執行，Opus（Anthropic）審查（不同公司）
  - 純學術硬底子分析，不包含任何籌碼面分析

---

### **P1: 公司池篩選（季度執行）**

#### **P1: 公司池篩選**
- **執行頻率**：季度（與 P0/P0.7 同步）
- **執行者**：SONNET (`claude-sonnet-4-5-20250929`)
- **審查者**：GPT (`gpt-5.2`)
- **功能**：三層對位檢查、三池分類、Moat_Type 分類、Rerate_State 分類
- **批次大小**：15 批次（每批約 10-15 檔）
- **備註**：只挑選符合 P0 結論的公司，不包含任何籌碼面分析

---

### **P2 系列：基本面財務分析**

#### **P2_MONTHLY: 基本面財務分析（月度）**
- **執行頻率**：月度（針對所有 Master_Candidates）
- **執行者**：SONNET (`claude-sonnet-4-5-20250929`)
- **審查者**：GPT (`gpt-5.2`)
- **功能**：Gate 檢查、分層決策、財務指標分析、同業比較、雙 FPE 制度
- **批次大小**：N/A（單次執行）
- **備註**：
  - ⭐ 兩階段流程：Stage 1（AI 執行）識別同業，Stage 2（程式執行）計算相對位置
  - 純基本面分析，不包含任何籌碼面分析

#### **P2_QUARTERLY: 基本面財務分析（季度）**
- **執行頻率**：季度（更深入的分析）
- **執行者**：SONNET (`claude-sonnet-4-5-20250929`)
- **審查者**：GPT (`gpt-5.2`)
- **功能**：Gate 檢查、分層決策、財務指標分析、同業比較、雙 FPE 制度
- **批次大小**：N/A（單次執行）
- **備註**：同 P2_MONTHLY，但分析更深入

---

### **P2.5 系列：機構級籌碼分析**

#### **P2.5_MONTHLY: 機構級籌碼分析（月度）**
- **執行頻率**：月度（與 P2_MONTHLY 同步）
- **執行者**：SONNET (`claude-sonnet-4-5-20250929`)
- **審查者**：GPT (`gpt-5.2`)
- **功能**：13F 機構持倉變化分析、內部人交易分析、期權活動分析、Dark Pool 活動分析、對沖基金 Clone 分析、計算 Smart_Money_Score
- **批次大小**：6 檔/批
- **備註**：
  - 數據來源：從 P5 Daily 收集的 `SMART_MONEY_DAILY` 表格讀取
  - 使用 `EXECUTOR`/`AUDITOR` 自動路由

#### **P2.5_QUARTERLY: 機構級籌碼分析（季度）**
- **執行頻率**：季度（與 P2_QUARTERLY 同步，包含 13F 分析）
- **執行者**：SONNET (`claude-sonnet-4-5-20250929`)
- **審查者**：GPT (`gpt-5.2`)
- **功能**：同 P2.5_MONTHLY，但包含 13F 分析
- **批次大小**：6 檔/批
- **備註**：同 P2.5_MONTHLY

---

### **P3: 技術面分析與掛單價位設定**

#### **P3: 技術面分析**
- **執行頻率**：
  - **統一調度（優先）**：由 P5 Weekly/Monthly 統一調度
  - **週度（定期）**：由 P5 Weekly 觸發（只處理有變動的股票）
- **執行者**：SONNET (`claude-sonnet-4-5-20250929`)
- **審查者**：GPT (`gpt-5.2`)
  - ⭐ **批次處理場景**：使用 GPT-5.2（400K context）進行全局 QA
- **功能**：Cat 分類、Buy 價格計算、技術指標分析、機構級預測視角
- **批次大小**：5 檔/批
- **備註**：
  - ⭐ 機構級預測視角：以機構主力、大型對沖基金視角分析
  - 整合 P2.5 輸出：Smart_Money_Score 影響 Cat 分類和 Buy 價格調整
  - 批次處理時審查者使用 GPT-5.2（400K context）處理完整上下文

---

### **P4: 資金分配分析設定**

#### **P4: 資金分配計算**
- **執行頻率**：
  - **自動觸發**：當 P3 有變動時
  - **週度**：由 P5 Weekly 觸發
- **執行者**：❌ **無 AI**（純計算模組）
- **審查者**：❌ **無 AI**
- **功能**：讀取 P2/P3 最新快照，計算理想配置（W_ideal）和實際應配置（W_now）
- **備註**：純數學計算，無 AI 分析

---

### **P5 系列：數據監控與策略制定**

#### **P5_DAILY: 數據監控（每日執行）**

##### **P5.1: 每日新聞處理** ⭐ V8.14 更新
- **執行頻率**：每日
- **新聞整合處理**：GEMINI_FLASH (`gemini-3.0-flash`)
  - ⭐ V8.14 升級：一次呼叫完成清洗+去重+分類
  - 批次大小：100 則/批（利用 2M 長窗口）
- **新聞驗證**：GEMINI_PRO (`gemini-3-pro-preview`)
  - 使用 Daily DB 硬數據驗證新聞中的數值
  - 三層驗證：時效性、語意健檢、數據驗證、Proxy驗證
- **快照留存**：GEMINI_PRO (`gemini-3-pro-preview`)
  - 簡單留存每日世界觀快照（不進行推理分析）
- **功能**：
  - 多語新聞收集（CSE 搜尋）
  - 新聞原子化、去重、多維度標籤分類
  - 個股新聞索引（反向索引）
  - 新聞數據驗證
  - 每日世界觀快照留存
- **備註**：
  - ⭐ V8.14：所有新聞處理任務改用 GEMINI_FLASH 3.0（整合處理）
  - Daily 只做簡單快照留存，整週的快照連貫性動態分析是 Weekly 的工作

##### **P5.1: 機構評級資料收集** ⭐ V8.9 新增
- **執行頻率**：每日
- **原子化清洗**：GEMINI_FLASH (`gemini-3.0-flash`)
  - 雜訊過濾（廣告、社論、非正式新聞）
  - 提取核心資訊、標準化格式
- **多語去重**：GEMINI_PRO (`gemini-3-pro-preview`)
  - 識別同一機構評級事件的不同語言版本
  - 只保留一條（優先英文版本）
- **功能**：機構評級資料收集、標準化、去重
- **備註**：獨立資料庫 `INSTITUTIONAL_RATINGS_DAILY`

##### **P5.2: 宏觀數據收集**
- **執行頻率**：每日
- **執行者**：❌ **無 AI**（純數據收集）
- **功能**：油價、貴金屬、匯率、國債利率、VIX、ETF 等
- **備註**：使用 GOOGLEFINANCE 和 CSE 搜尋

##### **P5.3: 技術指標計算**
- **執行頻率**：每日
- **執行者**：❌ **無 AI**（純計算）
- **功能**：RSI、MACD、ATR、MA 等技術指標計算
- **備註**：程式計算，無 AI 分析

#### **P5_WEEKLY: 週度策略制定**
- **執行頻率**：每週
- **執行者**：SONNET (`claude-sonnet-4-5-20250929`)
- **審查者**：GPT (`gpt-5.2`)
  - ⭐ **策略批次處理場景**：使用 GPT-5.2（400K context）進行全局 QA
- **功能**：
  - 世界觀分析（整合 Daily 快照）
  - 個股策略制定
  - 宏觀數據分析
  - 策略比對機制（比對上一週的策略與本週的市場真實反應）
- **批次大小**：個股策略批次處理（批次大小待確認）
- **備註**：
  - 批次處理時審查者使用 GPT-5.2（400K context）處理完整上下文
  - ⭐ V8.12：避免重複工作（使用 Daily 建立的索引和計算結果）

#### **P5_MONTHLY: 月度策略制定**
- **執行頻率**：每月
- **執行者**：SONNET (`claude-sonnet-4-5-20250929`)
- **審查者**：GPT (`gpt-5.2`)
- **功能**：
  - 月度策略制定
  - 策略比對機制（比對上一月的策略與本月的市場真實反應）
  - 統整全月學習經驗
- **備註**：同 P5_WEEKLY，但時間維度為月度

#### **P5_QUARTERLY: 季度策略制定**
- **執行頻率**：每季
- **執行者**：SONNET (`claude-sonnet-4-5-20250929`)
- **審查者**：GPT (`gpt-5.2`)
- **功能**：
  - 季度策略制定
  - 策略比對機制（比對上一季的策略與本季的市場真實反應）
  - 統整全季學習經驗
- **備註**：同 P5_WEEKLY，但時間維度為季度

---

## 🔍 特殊用途模型

### **GEMINI_SEARCH: 事實查證（條件觸發）**
- **模型**：GEMINI_PRO (`gemini-3-pro-preview`)
- **觸發條件**：當執行者提出 `FACT_CHECK` 類型的 `audit_questions` 時
- **功能**：使用 CSE 搜尋驗證執行者提出的問題
- **使用場景**：所有 Phase 的自我質疑機制

---

## 📈 模型使用統計

### 執行者模型使用頻率
- **SONNET**：P1, P2_MONTHLY, P2_QUARTERLY, P2.5_MONTHLY, P2.5_QUARTERLY, P3, P5_WEEKLY, P5_MONTHLY, P5_QUARTERLY（9 個任務）
- **OPUS**：P0（1 個任務）
- **O3**：P0.7（1 個任務）
- **GPT**：P5_DAILY（1 個任務，但 V8.14 已改用 GEMINI_FLASH）
- **GEMINI_FLASH**：P5_DAILY 新聞處理（1 個任務）⭐ V8.14 新增

### 審查者模型使用頻率
- **GPT**：P0, P1, P2_MONTHLY, P2_QUARTERLY, P2.5_MONTHLY, P2.5_QUARTERLY, P3, P5_WEEKLY, P5_MONTHLY, P5_QUARTERLY（10 個任務）
- **OPUS**：P0.7（1 個任務）
- **GEMINI_PRO**：P5_DAILY（1 個任務）

### 特殊用途模型
- **GEMINI_FLASH**：P5_DAILY 新聞處理、P5_DAILY 機構評級原子化（2 個任務）⭐ V8.14 升級
- **GEMINI_PRO**：P5_DAILY 新聞驗證、P5_DAILY 快照留存、P5_DAILY 機構評級去重、GEMINI_SEARCH（4 個任務）

---

## 💡 可用 Gemini Flash 優化的潛在場景

### ✅ 已實施（V8.14）
1. **P5_DAILY 新聞處理**：✅ 已改用 GEMINI_FLASH 3.0（整合處理，100 則/批）

### 🔍 待評估場景（參考 V8.14 分析文檔）

#### **P2.5 潛在優化**
1. **數據提取和標準化**：批量統一 13F/期權數據格式
2. **關鍵信息摘要**：批量提取每檔股票的關鍵籌碼信息摘要
3. **初步篩選**：批量篩選需要深度分析的候選（50-100 檔/批）

#### **P3 潛在優化**
1. **數據提取和標準化**：批量統一技術指標數據格式
2. **關鍵信息摘要**：批量提取每檔股票的關鍵技術信號摘要
3. **初步篩選**：批量篩選需要深度分析的候選（50-100 檔/批）

#### **P5_WEEKLY 潛在優化**
1. **數據摘要**：批量提取個股新聞摘要（如果尚未由 Daily 完成）
2. **初步篩選**：批量篩選需要深度分析的個股候選

---

## ⚠️ 注意事項

1. **推理能力限制**：Gemini Flash 推理能力較弱，不適合深度分析任務
2. **品質驗證**：需要測試 Gemini Flash 處理品質，確保不影響最終分析結果
3. **批次大小調整**：根據實際效果調整批次大小（從 100 開始測試）
4. **成本考量**：Gemini Flash 成本遠低於 SONNET/GPT，適合批量預處理任務

---

## 📝 更新記錄

- **V8.14（2026-01-19）**：
  - ✅ P5_DAILY 新聞處理改用 GEMINI_FLASH 3.0（整合處理，100 則/批）
  - ✅ 更新 GEMINI_FLASH 配置：model → `gemini-3.0-flash`，maxTokens → 2M
  - ✅ 新增個股 AI 工作優化分析（參考 `V8.14_GeminiFlash整合處理與個股AI優化分析.md`）

---

**此文檔對齊 V8.0 SSOT 和 V8.14 變更，列出所有 P0-P5 階段的 AI 模型使用情況。**
