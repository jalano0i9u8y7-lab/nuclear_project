# V8.13 GAS上傳清單 - 修正Memory Manager架構

**日期**：2026-01-19  
**修正原因**：V7設計方向錯誤，修正為Memory Manager（極簡RAG）架構

---

## 📋 需要上傳到GAS的檔案清單

### ✅ 新增檔案

1. **`src/24_P5_WEEKLY_MEMORY_MANAGER.js`**
   - **狀態**：新增檔案（取代V7設計的錯誤方向）
   - **內容**：Memory Manager架構實現
   - **包含功能**：
     - Tagger & Summarizer（生成market_tags和executive_summary）
     - Reflection Agent（AI生成教訓和證據）
     - Context Retriever（標籤檢索相似歷史案例）
     - Memory Pack Builder（組裝三層記憶）
     - Principles Governor（月度治理）
   - **上傳方式**：在GAS編輯器中創建新檔案，複製內容

### ✅ 修改檔案

2. **`src/01_SHEETS_STRUCTURE.js`**
   - **狀態**：修改（修正V7設計的Schema）
   - **修正內容**：
     - `P5_STRATEGY_SNAPSHOT_SCHEMA`：新增`executive_summary`、`market_tags_json`、`period_start`、`period_end`
     - `P5_OUTCOME_SNAPSHOT_SCHEMA`：簡化為`scorecard_json`和`reflection_json`
     - `P5_LEARNING_STATE_SCHEMA`：改為`principles_summary`和`active_calibration`
     - `P5_SCENARIO_MEMORY_SCHEMA`：簡化為標籤檢索
   - **上傳方式**：在GAS編輯器中更新現有檔案

### ⚠️ 廢棄檔案（可選刪除）

3. **`src/24_P5_WEEKLY_LEARNING_V7.js`**
   - **狀態**：廢棄（V7設計方向錯誤）
   - **建議**：可以刪除，或保留作為參考（但不要使用）

---

## 📝 上傳步驟

### 步驟1：上傳新增檔案

1. 打開Google Apps Script編輯器
2. 點擊「+」按鈕創建新檔案
3. 命名為：`24_P5_WEEKLY_MEMORY_MANAGER`
4. 複製 `src/24_P5_WEEKLY_MEMORY_MANAGER.js` 的內容
5. 貼上到新檔案中
6. 保存（Ctrl+S 或 Cmd+S）

### 步驟2：更新修改檔案

1. 在GAS編輯器中找到 `01_SHEETS_STRUCTURE` 檔案
2. 複製本地修改後的內容
3. 貼上到GAS編輯器中（替換現有內容）
4. 保存（Ctrl+S 或 Cmd+S）

### 步驟3：驗證

1. 檢查所有檔案是否都已上傳
2. 檢查語法錯誤（GAS編輯器會自動檢查）
3. 測試執行（可選）

---

## ⚠️ 重要提醒

**核心哲學轉變**：
- ❌ 錯誤：用程式寫動態學習系統
- ✅ 正確：GAS是Librarian，AI是Reader

**禁止事項**：
1. 禁止任何模組直接改策略邏輯/if-then
2. AI的`parameter_recommendations`不得直接套用到程式執行層
3. Safety Lock只能輸出「建議限制」，由Weekly決策採用或override

---

**檢查清單**：
- [ ] 新增檔案已上傳
- [ ] 修改檔案已更新
- [ ] 語法檢查通過
- [ ] 功能測試通過（可選）

---

**此文檔用於追蹤V8.13修正後的Memory Manager架構上傳，確保所有變更都同步到GAS環境。**
