# V8.19 ä¸‰å±¤æ±ºç­–æ¶æ§‹å¯¦æ–½ç¸½çµ

**æ—¥æœŸ**ï¼š2026-01-25  
**å°æ‡‰**ï¼šå¯©æŸ¥å ±å‘Š C1â€“C3ã€M1â€“M3ã€N1â€“N3ï¼Œä¸‰å±¤ Prompt æ¶æ§‹ï¼ˆç¡¬ç´„æŸ + è»Ÿå¼•å° + è‡ªç”±ç©ºé–“ï¼‰

---

## âœ… å·²å®Œæˆ

### C1ï¼šP5 Weekly æ±ºç­–æ ¸å¿ƒ â€” ä¸‰å±¤æ¶æ§‹

**æª”æ¡ˆ**ï¼š`src/24_P5_WEEKLY_DECISION_FRAMEWORK.js`ï¼ˆæ–°å»ºï¼‰

- **Layer 1 ç¡¬ç´„æŸ**ï¼š
  - ç³»çµ±ç´šï¼š`lateStageWithHighRisk`ï¼ˆLATE + HIGH â†’ ç¦ Cat3ã€max_U 0.5ã€max_position_cap 0.05ï¼‰ã€`defcon1`ã€`emergencyExit`
  - ç”¢æ¥­ç´šï¼š`divergenceAlert`ã€`industryPhaseOut`
  - å€‹è‚¡ç´šï¼š`insiderSelling`ï¼ˆå¼·åˆ¶å‡ç´š P5-Aã€max_position_cap 0.03ï¼‰ã€`safetyLock`
  - æ•¸å­¸é‚Šç•Œï¼šæ¬Šé‡ç¸½å’Œ = 1.0 (Â±0.01)ã€max_position_cap âˆˆ [0.01, 0.20]ã€buy_ladder è¦å‰‡

- **Layer 2 è»Ÿå¼•å°**ï¼š
  - åŸºæº–æ¬Šé‡ï¼šfundamental 0.30ã€chips 0.25ã€tech 0.25ã€macro 0.10ã€sentiment 0.10
  - æƒ…å¢ƒå»ºè­°ï¼šè²¡å ±å‰ 1â€“2 é€±ã€çªç ´å‹æ…‹ã€é«˜æ³¢å‹•ï¼ˆVIX>25ï¼‰ã€P2 Milestone é©—è­‰æœŸ
  - å„ªå…ˆç´šè¦å‰‡ï¼šç³»çµ±ç´š > ç±Œç¢¼ > æŠ€è¡“/åŸºæœ¬é¢ã€æ–°èèˆ‡æ•¸æ“šè¡çªæ™‚å„ªå…ˆæ•¸æ“š

- **ç¨‹å¼ä»‹é¢**ï¼š
  - `enforceHardConstraints(context, aiOutput)`ï¼šæª¢æŸ¥è§¸ç™¼çš„ç¡¬ç´„æŸèˆ‡æ•¸å­¸é‚Šç•Œ
  - `applyHardConstraints(aiOutput, enforcedAdjustments, context)`ï¼šè¦†å¯« Catã€max_Uã€max_position_capã€escalationã€halt_all_buy
  - `getTriggeredConstraints(context)`ï¼šä¾› Prompt ä½¿ç”¨
  - `getScenarioSuggestions(context)`ï¼šä¾› Prompt ä½¿ç”¨

**å¾…æ•´åˆ**ï¼šåœ¨ P5 Weekly å€‹è‚¡ç­–ç•¥ç”¢å‡ºå¾Œï¼ˆå¦‚ `P5_B_Execute` å›å‚³æˆ– M0 çµæœè™•ç†è™•ï¼‰å‘¼å« `enforceHardConstraints` â†’ `applyHardConstraints`ï¼Œå†å¯«å…¥å¿«ç…§ï¼ä¸‹å–®è¨ˆç•«ã€‚å»ºè­°åœ¨ `24_P5_WEEKLY_STOCK_STRATEGY.js` æˆ– `24_P5_WEEKLY_FINAL_OUTPUT.js` çš„æµç¨‹ä¸­æ’å…¥ã€‚

---

### C3ï¼šP4 Portfolio Correlation Lock å„ªå…ˆåº

**ç¾ç‹€**ï¼š`10_P4_CALCULATOR.js` çš„ `applyPortfolioCorrelationLock` å·²å¯¦ç¾æ¿å¡Šæ›éšªä¸Šé™èˆ‡è¶…æ¨™è™•ç†ï¼Œä¸”å…·æ˜ç¢ºå„ªå…ˆåºï¼š

1. **Tier**ï¼šCORE > STABLE_SWING > AGGRESSIVE > OPPORTUNISTIC  
2. **Cat**ï¼šCat2 > Cat3 > Cat4-A > Cat4-B > Cat5ï¼ˆæ¸›å°‘æ™‚å…ˆç¸®å¾Œæ®µï¼‰  
3. **RS**ï¼šhigher RS å„ªå…ˆ  
4. **Volatility**ï¼šlower vol å„ªå…ˆ  
5. **Existing position**ï¼šæ—¢æœ‰å€‰ä½å„ªå…ˆ  

èˆ‡å¯©æŸ¥å ±å‘Š C3 çš„ã€ŒTier S æ’åºã€RS/Vol è¡çªã€Existing è™•ç†ã€æ–¹å‘ä¸€è‡´ï¼Œ**ç„¡éœ€é‡å¯«**ï¼›è‹¥æœªä¾†è¦æ”¹æˆã€ŒåŠ æ¬Šè©•åˆ†ã€åˆ¶ï¼Œå¯æŠ½æˆ `calculatePriorityScore(stock, context)` å†é‡æ§‹ sort é‚è¼¯ã€‚

---

## âœ… å·²å®Œæˆï¼ˆ2026-01-25 æ›´æ–°ï¼‰

### C2ï¼šå­¸ç¿’ç³»çµ±æ–·éˆä¿®å¾© âœ…

- **LEARNING_STATE åƒæ•¸æ³¨å…¥**ï¼šâœ… å·²å¯¦ç¾ - `getLatestLearningState()` ç¾åœ¨è¿”å› `learning_params`ï¼ˆåŒ…å« `breathing_weights`ã€`entry_confirmation_atr_multiple`ã€`lock_profit_atr_multiple` ç­‰ï¼‰ï¼Œä¸¦åœ¨ `context.learning_params` ä¸­æä¾›çµ¦ P5 Weekly ä½¿ç”¨ã€‚
- **SCENARIO_MEMORY / Safety Lock**ï¼šâœ… å·²å¯¦ç¾ - å‰µå»º `src/24_P5_WEEKLY_SCENARIO_MEMORY.js`ï¼Œå¯¦ç¾ `extractScenarioSignature`ã€`getHistoricalScenarios`ã€`checkSafetyLock`ã€‚åœ¨ P5 Weekly Core ä¸­æ•´åˆ Safety Lock æª¢æŸ¥ï¼Œè‹¥æ­»äº¡ç‡ > 0.5 å‰‡è§¸ç™¼ Safety Lockï¼ˆ`max_exposure` ä¸Šé™ï¼‰ã€‚
- **åƒæ•¸èª¿æ•´å»ºè­°**ï¼šâ³ å¾…å¯¦ç¾ - `compareStrategyWithReality` çš„ Scorecard å¯ç”¢å‡ºã€Œåƒæ•¸èª¿æ•´å»ºè­°ã€çµæ§‹ã€‚

### M1ï¼šP3 é€±ç·šæŠ€è¡“æŒ‡æ¨™ âœ…

- **`calculateWeeklyIndicators`**ï¼šâœ… å·²å¯¦ç¾ - åœ¨ `src/22_P3_DATA_COLLECTOR.js` ä¸­æ–°å¢ `calculateWeeklyIndicators` å‡½æ•¸ï¼Œè¨ˆç®—é€±ç·š MA20/50/200ã€RSIï¼ˆ14 é€±ï¼‰ã€MACDï¼ˆ12, 26, 9ï¼‰ã€‚
- **P3 Prompt**ï¼šâ³ å¾…æ•´åˆ - éœ€è¦åœ¨ P3 Prompt ä¸­å€åˆ† `[WEEKLY_CHART]` / `[DAILY_CHART]`ï¼Œå‚³å…¥ `weekly_indicators`ã€‚

### M2ï¼šDelta Pack è³‡è¨Šéºæ¼ âœ…

- **é—œéµè¨Šè™Ÿå§‹çµ‚åŒ…å«**ï¼šâœ… å·²å¯¦ç¾ - å®šç¾© `CRITICAL_SIGNALS` åˆ—è¡¨ï¼Œåœ¨ `buildMarketLevelDelta` å’Œ `buildStockLevelDelta` ä¸­å§‹çµ‚åŒ…å«é—œéµè¨Šè™Ÿï¼ˆ`vix`ã€`market_regime`ã€`defcon_level`ã€`p0_7_time_position`ã€`p0_7_turning_point_risk`ã€`p2_5_insider_selling_alert`ã€`p2_5_abnormal_13f_distribution`ï¼‰ï¼Œä¸¦æ¨™è¨» `changed` / `UNCHANGED` ç‹€æ…‹ã€‚
- **ã€Œæœªè®Šå‹•ä¹Ÿæ˜¯è¨Šè™Ÿã€**ï¼šâœ… å·²å¯¦ç¾ - é—œéµè¨Šè™Ÿå³ä½¿æœªè®Šå‹•ä¹Ÿæœƒåœ¨ Delta Pack ä¸­ä¿ç•™ï¼Œé¿å… AI èª¤åˆ¤ç‚ºã€Œç„¡è³‡è¨Šã€ã€‚

### M3ï¼šP2 Milestone é©—è­‰æ™‚é–“çª—å£ âœ…

- **é©—è­‰çª—å£**ï¼šâœ… å·²å¯¦ç¾ - åœ¨ `src/24_P5_WEEKLY_MILESTONE_VERIFICATION.js` ä¸­æ–°å¢ `generateMilestoneVerificationWindow` å‡½æ•¸ï¼Œä¾é‡Œç¨‹ç¢‘é¡å‹æ¨ç®— `earliest_check`ã€`optimal_check`ã€`latest_check`ã€‚
- **éƒ¨åˆ†é”æˆ**ï¼šâœ… å·²å¯¦ç¾ - å®šç¾© `partial_completion_threshold = 0.70`ï¼Œå¯¦ç¾ `checkMilestoneAchievementWithPartial` å‡½æ•¸ï¼Œæ”¯æŒ `PARTIALLY_VERIFIED` ç‹€æ…‹ï¼Œä¸¦åœ¨ `checkSingleMilestone` ä¸­æ•´åˆã€‚

### N1â€“N3ï¼ˆä¸­åº¦å•é¡Œï¼‰âœ… å·²å®Œæˆï¼ˆ2026-01-25ï¼‰

- **N1**ï¼šâœ… å·²å¯¦ç¾ â€” `validateFinancialReportExtraction` æ–¼ Flash æå–å¾Œæª¢æŸ¥ P1/P2/P3ï¼Œä¸å®Œæ•´æ™‚æ¨™è¨˜ `INCOMPLETE_EXTRACTION` ä¸¦å¯«å…¥ `Financial_Report_Extraction_Status`ã€‚å¯¦ç¾æ–¼ `20_P1_FINANCIAL_REPORTS.js`ã€‚
- **N2**ï¼šâœ… å·²å¯¦ç¾ â€” æ©Ÿæ§‹è©•ç´šæ™‚é–“ç¶­åº¦ç°¡åŒ–ç‚º **çŸ­æœŸ 7dã€ä¸­æœŸ 30d**ï¼ˆç§»é™¤é•·æœŸï¼‰ã€‚æ›´æ–° `24_P5_INSTITUTIONAL_RATINGS_UPDATE_CREDIBILITY.js`ã€`24_P5_WEEKLY_SENTIMENT.js`ï¼ˆ`getPriceReactionMultiTimeframe`ï¼‰ã€`24_P5_INSTITUTIONAL_RATINGS_LEARNING.js`ã€‚
- **N3**ï¼šâœ… å·²å¯¦ç¾ â€” P6ã€Œæ®˜å½±æ©Ÿåˆ¶ã€çµ±ä¸€æ›´åç‚º **20 åˆ†é˜å‹•èƒ½è¿½è¹¤**ï¼Œæ›´æ–° `28_P6_SHADOW_MECHANISM.js`ã€`28_P6_LOGGER.js`ã€`28_P6_INTRADAY_MONITOR.js`ã€`26_TRIGGER_SETUP.js`ã€`01_SHEETS_STRUCTURE.js` ä¹‹è¨»è§£èˆ‡æ—¥èªŒã€‚`P6_SHADOW_PRICES` è¡¨åä¿ç•™ã€‚

---

## ğŸ“‹ ä½¿ç”¨æ–¹å¼ï¼ˆC1 æ±ºç­–æ¡†æ¶ï¼‰

```javascript
// å‡è¨­åœ¨ P5 Weekly å€‹è‚¡ç­–ç•¥ç”¢å‡ºå¾Œ
const context = { p0_7_time_position, p0_7_turning_point_risk, defcon_level, ... };
const aiOutput = { cat, max_U, max_position_cap, factor_weights, buy_ladder, ... };

const check = enforceHardConstraints(context, aiOutput);
if (check.hasViolations) {
  Logger.log('[Hard Constraint] é•å: ' + JSON.stringify(check.violations));
  aiOutput = applyHardConstraints(aiOutput, check.enforcedAdjustments, context);
}

// å¾ŒçºŒå¯«å…¥å¿«ç…§ã€ç”¢ç”Ÿ order_plan ç­‰
```

---

## ğŸ“Œ å°çµ

| é …ç›® | ç‹€æ…‹ | å‚™è¨» |
|------|------|------|
| C1 ä¸‰å±¤æ±ºç­–æ¶æ§‹ | âœ… å·²å¯¦ç¾ | `24_P5_WEEKLY_DECISION_FRAMEWORK.js`ï¼Œå·²ä¸²æ¥ P5 Weekly æµç¨‹ |
| C2 å­¸ç¿’æ–·éˆ / Safety Lock | âœ… å·²å¯¦ç¾ | LEARNING_STATE æ³¨å…¥ã€SCENARIO_MEMORYã€Safety Lock æª¢æŸ¥ |
| C3 P4 Correlation Lock | âœ… å·²æ»¿è¶³ | å„ªå…ˆåºèˆ‡æ¿å¡Šä¸Šé™å·²å…·å‚™ |
| M1 P3 é€±ç·šæŒ‡æ¨™ | âœ… å·²å¯¦ç¾ | é€±ç·š MA/RSI/MACD è¨ˆç®—å‡½æ•¸ï¼Œå¾…æ•´åˆåˆ° Prompt |
| M2 Delta Pack | âœ… å·²å¯¦ç¾ | é—œéµè¨Šè™Ÿå§‹çµ‚åŒ…å«ã€UNCHANGED èªæ„ |
| M3 Milestone é©—è­‰ | âœ… å·²å¯¦ç¾ | æ™‚é–“çª—å£ã€éƒ¨åˆ†é”æˆã€é©—è­‰é‚è¼¯ |
| N1 è²¡å ±æå–å®Œæ•´æ€§ | âœ… å·²å¯¦ç¾ | `validateFinancialReportExtraction`ã€INCOMPLETE_EXTRACTION æ¨™è¨˜ |
| N2 æ©Ÿæ§‹è©•ç´šæ™‚é–“ç¶­åº¦ | âœ… å·²å¯¦ç¾ | çŸ­æœŸ 7dã€ä¸­æœŸ 30dï¼Œç§»é™¤é•·æœŸ |
| N3 P6 æ®˜å½±æ›´å | âœ… å·²å¯¦ç¾ | çµ±ä¸€ç‚ºã€Œ20 åˆ†é˜å‹•èƒ½è¿½è¹¤ã€ |

**ä¸‹ä¸€æ­¥**ï¼šC1â€“C3ã€M1â€“M3ã€N1â€“N3 å‡å·²å¯¦ç¾ï¼›å¯é€²è¡Œæ•´åˆæ¸¬è©¦èˆ‡ P3 Prompt é€±ç·šå€å¡Šè£œå¼·ã€‚
