# V8.13 GAS上傳清單 - 完整版（所有更新）

**日期**：2026-01-19  
**狀態**：所有更新檔案的完整清單

---

## 📋 需要上傳到GAS的檔案清單

### ✅ 新增檔案（1個）

1. **`src/24_P5_WEEKLY_MEMORY_MANAGER.js`**
   - **狀態**：新增檔案（Memory Manager架構實現）
   - **內容**：Memory Manager架構實現
   - **包含功能**：
     - Tagger & Summarizer（生成market_tags和executive_summary）
     - Reflection Agent（AI生成教訓和證據）
     - Context Retriever（標籤檢索相似歷史案例）
     - Memory Pack Builder（組裝三層記憶）
     - Principles Governor（月度治理）
   - **上傳方式**：在GAS編輯器中創建新檔案，複製內容

### ✅ 修改檔案（4個）

2. **`src/01_SHEETS_STRUCTURE.js`**
   - **狀態**：修改（修正V7設計的Schema，改為Memory Manager架構）
   - **修正內容**：
     - `P5_STRATEGY_SNAPSHOT_SCHEMA`：新增`executive_summary`、`market_tags_json`、`period_start`、`period_end`
     - `P5_OUTCOME_SNAPSHOT_SCHEMA`：簡化為`scorecard_json`和`reflection_json`
     - `P5_LEARNING_STATE_SCHEMA`：改為`principles_summary`和`active_calibration`
     - `P5_SCENARIO_MEMORY_SCHEMA`：簡化為標籤檢索
   - **上傳方式**：在GAS編輯器中更新現有檔案

3. **`src/24_P5_WEEKLY_CORE.js`**
   - **狀態**：修改（已移除V7相關調用）
   - **修改內容**：
     - Step 5.5：已移除`compareStrategyWithRealityEnhanced()`調用，改回使用`compareStrategyWithReality(1)`
     - Step 9後：已移除`trackStockStrategiesWithSnapshot()`調用，改回使用`trackStockStrategies()`
   - **上傳方式**：在GAS編輯器中更新現有檔案

4. **`src/24_P5_MONTHLY.js`**
   - **狀態**：修改（已移除V7相關調用）
   - **修改內容**：
     - Step 5.5：已移除`compareStrategyWithRealityEnhanced()`調用，改回使用`compareStrategyWithReality(1, "MONTH")`
   - **上傳方式**：在GAS編輯器中更新現有檔案

5. **`src/24_P5_QUARTERLY.js`**
   - **狀態**：修改（已移除V7相關調用）
   - **修改內容**：
     - Step 3.5：已移除`compareStrategyWithRealityEnhanced()`調用，改回使用`compareStrategyWithReality(1, "QUARTER")`
   - **上傳方式**：在GAS編輯器中更新現有檔案

---

## 🗑️ 需要刪除的檔案（1個）- ✅ 本地已刪除

1. **`src/24_P5_WEEKLY_LEARNING_V7.js`**
   - **狀態**：廢棄（V7設計方向錯誤）
   - **原因**：V7設計方向錯誤，已修正為Memory Manager架構
   - **本地狀態**：✅ 已刪除
   - **GAS狀態**：需要在GAS編輯器中刪除此檔案

---

## 📝 上傳步驟

### 步驟1：刪除廢棄檔案

1. 打開Google Apps Script編輯器
2. 找到 `24_P5_WEEKLY_LEARNING_V7` 檔案
3. 右鍵點擊檔案 → 選擇「刪除」
4. 確認刪除

### 步驟2：上傳新增檔案

1. 在GAS編輯器中點擊「+」按鈕創建新檔案
2. 命名為：`24_P5_WEEKLY_MEMORY_MANAGER`
3. 複製 `src/24_P5_WEEKLY_MEMORY_MANAGER.js` 的內容
4. 貼上到新檔案中
5. 保存（Ctrl+S 或 Cmd+S）

### 步驟3：更新修改檔案

#### 3.1 更新 `01_SHEETS_STRUCTURE.js`

1. 在GAS編輯器中找到 `01_SHEETS_STRUCTURE` 檔案
2. 複製本地修改後的內容
3. 貼上到GAS編輯器中（替換現有內容）
4. 保存（Ctrl+S 或 Cmd+S）

#### 3.2 更新 `24_P5_WEEKLY_CORE.js`

1. 在GAS編輯器中找到 `24_P5_WEEKLY_CORE` 檔案
2. 複製本地修改後的內容（已移除V7相關調用）
3. 貼上到GAS編輯器中（替換現有內容）
4. 保存（Ctrl+S 或 Cmd+S）

#### 3.3 更新 `24_P5_MONTHLY.js`

1. 在GAS編輯器中找到 `24_P5_MONTHLY` 檔案
2. 複製本地修改後的內容（已移除V7相關調用）
3. 貼上到GAS編輯器中（替換現有內容）
4. 保存（Ctrl+S 或 Cmd+S）

#### 3.4 更新 `24_P5_QUARTERLY.js`

1. 在GAS編輯器中找到 `24_P5_QUARTERLY` 檔案
2. 複製本地修改後的內容（已移除V7相關調用）
3. 貼上到GAS編輯器中（替換現有內容）
4. 保存（Ctrl+S 或 Cmd+S）

### 步驟4：驗證

1. 檢查所有檔案是否都已上傳/更新/刪除
2. 檢查語法錯誤（GAS編輯器會自動檢查）
3. 測試執行（可選）

---

## ⚠️ 重要提醒

**核心哲學轉變**：
- ❌ 錯誤：用程式寫動態學習系統（V7設計）
- ✅ 正確：GAS是Librarian，AI是Reader（V8.13修正）

**注意事項**：
1. 必須刪除 `24_P5_WEEKLY_LEARNING_V7.js`（V7設計方向錯誤）
2. 必須移除所有 `compareStrategyWithRealityEnhanced()` 和 `trackStockStrategiesWithSnapshot()` 的調用
3. 新的Memory Manager架構使用 `24_P5_WEEKLY_MEMORY_MANAGER.js`

---

## ✅ 檢查清單

- [ ] 刪除 `24_P5_WEEKLY_LEARNING_V7.js`
- [ ] 上傳 `24_P5_WEEKLY_MEMORY_MANAGER.js`
- [ ] 更新 `01_SHEETS_STRUCTURE.js`
- [ ] 更新 `24_P5_WEEKLY_CORE.js`（移除V7相關調用）
- [ ] 更新 `24_P5_MONTHLY.js`（移除V7相關調用）
- [ ] 更新 `24_P5_QUARTERLY.js`（移除V7相關調用）
- [ ] 語法檢查通過
- [ ] 功能測試通過（可選）

---

**此文檔用於追蹤V8.13修正後的所有檔案更新，確保所有變更都同步到GAS環境。**
