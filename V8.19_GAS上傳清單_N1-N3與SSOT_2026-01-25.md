# V8.19 GAS 上傳清單 — N1–N3 實現與 SSOT 整理

**日期**：2026-01-25  

## 新增／修改檔案

### 修改檔案
| 檔案 | 變更摘要 |
|------|----------|
| `src/20_P1_FINANCIAL_REPORTS.js` | N1：新增 `validateFinancialReportExtraction`；`saveFinancialReportExtraction` 內提取後先驗證，不完整時標記 `INCOMPLETE_EXTRACTION` 並寫入 `Financial_Report_Extraction_Status` |
| `src/24_P5_INSTITUTIONAL_RATINGS_UPDATE_CREDIBILITY.js` | N2：機構評級可信度觸發改為短期 7d、中期 30d |
| `src/24_P5_INSTITUTIONAL_RATINGS_LEARNING.js` | N2：短期 7d、中期 30d，移除長期；最終可信度 `calculateFinalCredibilityScore(short, mid, null)` |
| `src/24_P5_WEEKLY_SENTIMENT.js` | N2：`getPriceReactionMultiTimeframe` 改為 short 7d、mid 7–30d；多時間維度 warnings 僅用 short+mid |
| `src/28_P6_SHADOW_MECHANISM.js` | N3：模組名稱與註解、Logger 統一為「20 分鐘動能追蹤」 |
| `src/28_P6_LOGGER.js` | N3：註解與日誌改為「20 分鐘動能追蹤」 |
| `src/28_P6_INTRADAY_MONITOR.js` | N3：註解與日誌改為「20 分鐘動能追蹤」；`clearOldShadowDataIfNeeded` 註解更新 |
| `src/26_TRIGGER_SETUP.js` | N3：清除步驟註解改為「20 分鐘動能追蹤」 |
| `src/01_SHEETS_STRUCTURE.js` | N3：`price_20min_ago` 欄位註解改為「20 分鐘動能追蹤」 |
| `V8.0架構定案文檔_SSOT.md` | 新增 V8.19 項 11（N1）、12（N2）、13（N3） |
| `V8.19_三層決策架構實施總結_2026-01-25.md` | N1–N3 標記為已完成；小結表與下一步更新 |

### 未修改但屬 V8.19 既有實現（已上傳）
- C1：`24_P5_WEEKLY_DECISION_FRAMEWORK.js`、`24_P5_WEEKLY_CORE.js`
- C2：`24_P5_WEEKLY_SCENARIO_MEMORY.js`、`24_P5_WEEKLY_DATA.js`
- M1：`22_P3_DATA_COLLECTOR.js`
- M2：`24_P5_WEEKLY_DELTA_PACK.js`
- M3：`24_P5_WEEKLY_MILESTONE_VERIFICATION.js`

## 上傳指令

```bash
clasp push --force
```

## 檢查清單

- [x] N1 `validateFinancialReportExtraction` 實現並串接
- [x] N2 機構評級 7d/30d 與 LEARNING、SENTIMENT 更新
- [x] N3 P6 殘影 → 20 分鐘動能追蹤 用詞統一
- [x] SSOT 與 V8.19 實施總結已更新
- [x] 語法／linter 無誤
